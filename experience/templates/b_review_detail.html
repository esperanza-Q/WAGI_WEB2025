<h2>{{ review.title }}</h2>

<p>작성자: {{ review.user.display_name }}</p>
<p>활동 기간: {{ review.grade }} / {{ review.year_term }}</p>
<p>좋아요: {{ like_count }}</p>

<hr>

<!-- 이미지 출력 -->
{% if images %}
    <div>
        {% for img in images %}
            <img src="{{ img.image.url }}" style="max-width:300px; margin:10px;">
        {% endfor %}
    </div>
{% endif %}

<hr>

<!-- 후기 본문 -->
<p>{{ review.content }}</p>

<hr>

<!-- 좋아요 버튼 -->
{% if user.is_authenticated %}
    {% if user_like %}
        <form action="{% url 'toggle_like' review.id %}" method="post">
            {% csrf_token %}
            <button type="submit">좋아요 취소</button>
        </form>
    {% else %}
        <form action="{% url 'toggle_like' review.id %}" method="post">
            {% csrf_token %}
            <button type="submit">좋아요</button>
        </form>
    {% endif %}
{% else %}
    <p>좋아요를 누르려면 로그인하세요.</p>
{% endif %}

<hr>

<!-- 댓글 목록 -->
<h3>댓글</h3>
{% for c in comments %}
    <div>
        <strong>{{ c.user.display_name }}</strong> ({{ c.created_at|date:"Y-m-d H:i" }})<br>
        {{ c.content }}
        <hr>
    </div>
{% empty %}
    <p>댓글이 없습니다.</p>
{% endfor %}

<!-- 댓글 작성 -->
{% if user.is_authenticated %}
    <form method="post" action="{% url 'add_comment' review.id %}">
        {% csrf_token %}
        <textarea name="content" rows="3" placeholder="댓글 작성..."></textarea>
        <button type="submit">등록</button>
    </form>
{% else %}
    <p>댓글을 작성하려면 로그인하세요.</p>
{% endif %}

<!-- 뒤로가기 -->
<a href="{% url 'review_list' %}">← 목록으로</a>
