<html>
<head>
    <title>검색 테스트</title>
</head>
<body>
    <h2>검색 테스트</h2>
    <form method="get" style="margin-bottom:10px;">
        <label>카테고리:</label>
        {% for cat in categories %}
            <button type="submit" name="category" value="{{ cat }}" {% if category == cat %}style="font-weight:bold;"{% endif %}>{{ cat }}</button>
        {% endfor %}
        <br><br>
        <input type="text" name="q" placeholder="검색어" value="{{ q_query }}">
        <button type="submit">검색</button>
    </form>
    <hr>
    {% if reviews %}
        {% for r in reviews %}
            <div>
                <strong>{{ r.title }}</strong>
                <p>{{ r.content|truncatechars:100 }}</p>
                <p>작성자: {{ r.user.username }} / 날짜: {{ r.created_at|date:"Y-m-d" }}</p>
                <p>좋아요: {{ r.like_count }}</p>
                <hr>
            </div>
        {% endfor %}
    {% else %}
        <p>검색 결과가 없습니다.</p>
    {% endif %}
</body>
</html>
