{% extends 'base.html' %}
{% load static %}

{% block title %}SujeongBridge | QnA - 사용자{% endblock %}

{% block head_extra %}
  <link rel="stylesheet" href="{% static 'css/otherQnA-qna.css' %}">
{% endblock %}

{% block content %}
  <div class="container">

    <div class="other-profile-userInfo">
      <div class="other-profile-userImg"><img src={{target_user.profileImage.url}} class="other-profile-userImg"></div>

      <div class="other-profile-userId">
        {% if target_user %}
          {{ target_user.display_name }}
        {% else %}
          닉네임
        {% endif %}
      </div>

      <div class="other-profile-academic">
        <span class="other-profile-Grade">{{ target_user.grade }}학년</span>
        <span class="other-profile-major">{{ target_user.department.dept_name }}</span>
      </div>

      <div class="other-profile-userEmail">
        <span class="other-profile-email-label">이메일 | </span>
        <span class="otherQnA-profile-email-value">
          {% if target_user and target_user.email %}
            {{ target_user.email }}
          {% else %}
            -
          {% endif %}
        </span>
      </div>
    </div>

    <div class="otherQnA-list-wrapper">

      <div class="other-profile-menu">
        <a href="{% url 'qna:otherQna_roadmap' user_id=target_user.id %}">
          <button type="button" class="other-profile-roadmap">로드맵</button>
        </a>

        {% if target_user %}
          <a href="{% url 'qna:user_qna' target_user.id %}">
            <button type="button" class="other-profile-qna">Q&A</button>
          </a>
        {% else %}
          <button type="button" class="other-profile-qna">Q&A</button>
        {% endif %}

        {% if target_user %}
          <a href="{% url 'qna:write' %}?receiver={{ target_user.id }}">
            <button type="button" class="otherQnA-list-writeBtn">Q&A 남기기</button>
          </a>
        {% endif %}
      </div>

      <!-- ✅ QnA 리스트 (학번/닉네임 제거) -->
      <div class="otherQnA-list">
        {% for q in received_list %}
          <a href="{% url 'qna:detail' q.id %}" class="otherQnA-list-link">
            <div class="otherQnA-list-card">
              <span class="otherQnA-list-title">{{ q.title }}</span>
              <span>&gt;</span>
            </div>
          </a>
        {% empty %}
          <div class="otherQnA-list-empty">작성된 질문이 없습니다.</div>
        {% endfor %}
      </div>

    </div>
  </div>
{% endblock %}
